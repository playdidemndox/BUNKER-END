const TelegramBot = require('node-telegram-bot-api');
const express = require('express');
const cors = require('cors');
const fs = require('fs');
const path = require('path');

const TOKEN = '8505568581:AAFqPR_VNPVFp4FK7-JZm_IRinQ2NjR3y-M'; // —Ç–≤–æ–π —Ç–æ–∫–µ–Ω
const WEBAPP_URL = 'https://—Ç–≤–æ—è-—Å—Å—ã–ª–∫–∞-–Ω–∞-miniapp'; // –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã–π URL

const app = express();
app.use(cors());
app.use(express.json());
app.use(express.static(path.join(__dirname, 'public')));

const PORT = process.env.PORT || 3000;

// Telegram bot webhook
const bot = new TelegramBot(TOKEN);
bot.setWebHook(`${WEBAPP_URL}/bot${TOKEN}`);

app.post(`/bot${TOKEN}`, (req,res)=>{
  bot.processUpdate(req.body);
  res.sendStatus(200);
});

bot.onText(/\/start/, msg=>{
  bot.sendMessage(msg.chat.id, 'Mini App —Ä–∞–±–æ—Ç–∞–µ—Ç üöÄ', {
    reply_markup:{
      inline_keyboard:[
        [{ text:'üéÆ –ò–ì–†–ê–¢–¨', web_app:{ url: WEBAPP_URL } }]
      ]
    }
  });
});

// --- –ö–∞—Ä—Ç—ã ---
const cardsData = JSON.parse(fs.readFileSync(path.join(__dirname,'public','cards.json'),'utf-8'));

// --- –ö–æ–º–Ω–∞—Ç—ã ---
const rooms = {};

// --- –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É ---
app.po
